<!DOCTYPE html>
<html>
<head>
    <title>Test Registration Data</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .container { max-width: 600px; margin: 0 auto; }
        form { background: #f5f5f5; padding: 20px; border-radius: 8px; }
        input, select { width: 100%; padding: 8px; margin: 5px 0; }
        button { background: #dc2626; color: white; padding: 12px 24px; border: none; border-radius: 4px; cursor: pointer; }
        .result { margin-top: 20px; padding: 15px; border-radius: 4px; }
        .success { background: #d4edda; border: 1px solid #c3e6cb; }
        .error { background: #f8d7da; border: 1px solid #f5c6cb; }
    </style>
</head>
<body>
    <div class="container">
        <h1>Test Registration Form</h1>
        <p>This will test the registration with Razorpay payment data</p>
        
        <form id="testForm">
            <h3>Personal Details:</h3>
            <input type="text" name="fullName" placeholder="Full Name" value="Test User" required>
            <input type="email" name="email" placeholder="Email" value="test@example.com" required>
            <input type="tel" name="phone" placeholder="Phone" value="9876543210" required>
            <input type="text" name="college" placeholder="College" value="VNRVJIET" required>
            <input type="text" name="year" placeholder="Year" value="3rd year" required>
            <input type="text" name="course" placeholder="Course" value="Computer Science" required>
            
            <h3>Payment Details (Test Razorpay Data):</h3>
            <input type="text" name="paymentId" placeholder="Payment ID" value="pay_test123456789" required>
            <input type="text" name="paymentAmount" placeholder="Payment Amount" value="149" required>
            <input type="text" name="paymentStatus" placeholder="Payment Status" value="completed" required>
            
            <button type="submit">Test Registration</button>
        </form>
        
        <div id="result"></div>
    </div>

    <script>
        // Make sure this matches your deployed Google Apps Script URL
        const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbwT2wd8v2is-GvJrBbG7Vd6Hz8Mxr2a_XBZBSnOF1LzKrTlgPNMzBdj3kpxJR5Lgkgc/exec';
        
        document.getElementById('testForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const formData = new FormData(e.target);
            const resultDiv = document.getElementById('result');
            
            // Show what we're sending
            console.log('Sending data:');
            for (let [key, value] of formData.entries()) {
                console.log(`${key}: ${value}`);
            }
            
            resultDiv.innerHTML = '<p>Sending request...</p>';
            
            try {
                const response = await fetch(SCRIPT_URL, {
                    method: 'POST',
                    body: formData
                });
                
                const responseText = await response.text();
                console.log('Response:', responseText);
                
                if (response.ok) {
                    const result = JSON.parse(responseText);
                    resultDiv.innerHTML = `
                        <div class="success">
                            <h3>✅ Success!</h3>
                            <p><strong>Registration ID:</strong> ${result.registrationId}</p>
                            <p><strong>Payment Status:</strong> ${result.paymentStatus}</p>
                            <p><strong>Payment ID:</strong> ${result.paymentId}</p>
                            <p><strong>Amount:</strong> ₹${result.amount}</p>
                            <p><strong>Message:</strong> ${result.message}</p>
                        </div>
                    `;
                } else {
                    throw new Error(`HTTP ${response.status}: ${responseText}`);
                }
            } catch (error) {
                resultDiv.innerHTML = `
                    <div class="error">
                        <h3>❌ Error!</h3>
                        <p>${error.message}</p>
                    </div>
                `;
                console.error('Error:', error);
            }
        });
    </script>
</body>
</html>
